(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{497:function(t,s,a){"use strict";a.r(s);var n=a(40),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"核心能力"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心能力"}},[t._v("#")]),t._v(" 核心能力")]),t._v(" "),a("h2",{attrs:{id:"全局样式预设"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局样式预设"}},[t._v("#")]),t._v(" 全局样式预设")]),t._v(" "),a("p",[t._v("全局样式文件（"),a("code",[t._v("@/core/global.css")]),t._v("）默认被根组件（"),a("code",[t._v("@/core/App.vue")]),t._v("）引用，作用于项目全局，包含最最常用的样式预设。")]),t._v(" "),a("h3",{attrs:{id:"css-reset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css-reset"}},[t._v("#")]),t._v(" CSS Reset")]),t._v(" "),a("p",[t._v("重置浏览器默认样式，并统一滚动条样式与Mac Safari风格一致。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/cutting-mat/template-element-ui/blob/master/src/core/global.css#L1",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考源码"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"字体图标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#字体图标"}},[t._v("#")]),t._v(" 字体图标")]),t._v(" "),a("p",[t._v("在"),a("a",{attrs:{href:"https://www.iconfont.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("icon font"),a("OutboundLink")],1),t._v("配置自己的字体图标项目，unicode 方式引用，图标类名"),a("code",[t._v(".ion")]),t._v("。下载字体文件到"),a("code",[t._v("src/core/fonts/")]),t._v("文件夹，替换已有文件即可。")]),t._v(" "),a("div",{staticClass:"language-html line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 使用示例 --\x3e")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ion"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token entity",title:"&#xe6a9;"}},[t._v("&#xe6a9;")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ion"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token entity",title:"&#xe74f;"}},[t._v("&#xe74f;")]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("i")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://github.com/cutting-mat/template-element-ui/blob/master/src/core/global.css#L150",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考源码"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"css组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#css组件"}},[t._v("#")]),t._v(" CSS组件")]),t._v(" "),a("p",[t._v("内置常用的CSS组件，如flex栅格、固定宽高比矩形、单行文字等。")]),t._v(" "),a("p",[t._v("为防止后期组件调整与文档不一致，这里就不一一列举了。")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/cutting-mat/template-element-ui/blob/master/src/core/global.css#L198",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考源码"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"工具类库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工具类库"}},[t._v("#")]),t._v(" 工具类库")]),t._v(" "),a("p",[t._v("工具类库（"),a("code",[t._v("@/core/util.js")]),t._v("）是预置的实用工具，在"),a("code",[t._v("@/core/index.js")]),t._v("中默认导出，便于引用。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 引用内置工具\n * */")]),t._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全部引入")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" util "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/core"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按需引入")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("storage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/core"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h3",{attrs:{id:"storage-key-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#storage-key-value"}},[t._v("#")]),t._v(" storage(key, [value])")]),t._v(" "),a("p",[t._v("本地存储，基于"),a("code",[t._v("window.localStorage")]),t._v("实现，支持JSON格式存取前自动转换")]),t._v(" "),a("ul",[a("li",[t._v("@param key[String] 要存/取的键；自动将"),a("code",[t._v("process.env.BASE_URL")]),t._v("做为命名空间，也可以在"),a("code",[t._v("vue.config.js")]),t._v("里设置"),a("code",[t._v("process.env.VUE_APP_STORAGE_SPACE")]),t._v("更改命名空间。")]),t._v(" "),a("li",[t._v("@param value[any] 要存的值，若缺省则返回key的值")]),t._v(" "),a("li",[t._v("@return 只传key会返回该key的值")])]),t._v(" "),a("h3",{attrs:{id:"deepcopy-source"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deepcopy-source"}},[t._v("#")]),t._v(" deepcopy(source)")]),t._v(" "),a("p",[t._v("对象/数组深拷贝")]),t._v(" "),a("ul",[a("li",[t._v("@param source[Object|Array] 要拷贝的对象")]),t._v(" "),a("li",[t._v("@return 深拷贝后的对象/数组")])]),t._v(" "),a("h3",{attrs:{id:"buildtree-array-parentkey-sortfunction"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#buildtree-array-parentkey-sortfunction"}},[t._v("#")]),t._v(" buildTree(array, [parentKey], [sortFunction])")]),t._v(" "),a("p",[t._v("一维对象数组转树形结构")]),t._v(" "),a("ul",[a("li",[t._v("@param array[对象数组] 对象数组中的对象必须包含id和[parentKey]键，如{id: 1, pid: 0}。pid值为假或等于自身id，则判定为一级节点")]),t._v(" "),a("li",[t._v('@param parentKey[String] 指向上级id的key，默认"pid"')]),t._v(" "),a("li",[t._v("@param sortFunction[Function] 用于arrayObject.sort(sortFunction)的排序方法，默认不排序")]),t._v(" "),a("li",[t._v("@return 由children键建立层级的对象数组")])]),t._v(" "),a("h3",{attrs:{id:"formatdate-value-fmt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#formatdate-value-fmt"}},[t._v("#")]),t._v(" formatDate(value, [fmt])")]),t._v(" "),a("p",[t._v("日期格式化")]),t._v(" "),a("ul",[a("li",[t._v("@param value[milliseconds/dateString] 可以通过new Date()方法创建日期对象的毫秒数或日期字符串")]),t._v(" "),a("li",[t._v("@param fmt[String/undefined] 日期格式化模板字符串，例如"),a("code",[t._v('"yyyy/MM/dd hh:mm:ss"')])]),t._v(" "),a("li",[t._v("@return 格式化后的日期字符串")]),t._v(" "),a("li",[t._v("内置四种fmt快捷方式：")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("快捷方式")]),t._v(" "),a("th",[t._v("模板")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("year")]),t._v(" "),a("td",[t._v("yyyy")])]),t._v(" "),a("tr",[a("td",[t._v("month")]),t._v(" "),a("td",[t._v("yyyy/MM")])]),t._v(" "),a("tr",[a("td",[t._v("day")]),t._v(" "),a("td",[t._v("yyyy/MM/dd")])]),t._v(" "),a("tr",[a("td",[t._v("day-time")]),t._v(" "),a("td",[t._v("yyyy/MM/dd hh:mm")])])])]),t._v(" "),a("h3",{attrs:{id:"on-eventname-eventhandle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#on-eventname-eventhandle"}},[t._v("#")]),t._v(" on(eventName, eventHandle)")]),t._v(" "),a("p",[t._v("全局事件监听。重复注册同一个事件，只保留最后一次，使单页面应用反复进入页面不会重复注册事件；可以通过别名方式将一个事件多次注册。")]),t._v(" "),a("ul",[a("li",[t._v("@param eventName[String] 自定义事件名称，支持用双下划线添加别名，如 eventName__ANYSTRING")]),t._v(" "),a("li",[t._v("@param eventHandle[Function] 事件回调方法，参数接收触发事件方法发送的参数；缺省将关闭该事件监听")])]),t._v(" "),a("h3",{attrs:{id:"emit-eventname-msg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#emit-eventname-msg"}},[t._v("#")]),t._v(" emit(eventName, [msg])")]),t._v(" "),a("p",[t._v("全局事件触发")]),t._v(" "),a("ul",[a("li",[t._v('@param eventName[String] 要触发的事件名称，不需要包含别名部分，如 "myEvent__alias1"，只需要传 "myEvent"')]),t._v(" "),a("li",[t._v("@param msg[any] 触发事件时携带的参数")])]),t._v(" "),a("h3",{attrs:{id:"getsuffix-filename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getsuffix-filename"}},[t._v("#")]),t._v(" getSuffix(filename)")]),t._v(" "),a("p",[t._v("提取文件名中的扩展名")]),t._v(" "),a("ul",[a("li",[t._v("@param filename[String] 要提取扩展名的字符串")]),t._v(" "),a("li",[t._v("@return 转小写后的扩展名")])]),t._v(" "),a("h3",{attrs:{id:"throttle-method-delay-duration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#throttle-method-delay-duration"}},[t._v("#")]),t._v(" throttle(method, [delay, duration])")]),t._v(" "),a("p",[t._v("函数节流")]),t._v(" "),a("ul",[a("li",[t._v("@param method[Function] 要节流的函数方法")]),t._v(" "),a("li",[t._v("@param delay[Number] 过滤执行的间隔毫秒数，默认128")]),t._v(" "),a("li",[t._v("@param duration 至少执行一次的间隔毫秒数，默认1000")]),t._v(" "),a("li",[t._v("@return 具有节流特性的新函数")])]),t._v(" "),a("h3",{attrs:{id:"geturlparam-keyname-url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#geturlparam-keyname-url"}},[t._v("#")]),t._v(" getUrlParam(keyName, [url])")]),t._v(" "),a("p",[t._v("获取url中的query值")]),t._v(" "),a("ul",[a("li",[t._v("@param keyName[String] 要获取的参数名")]),t._v(" "),a("li",[t._v("@param url[String] 目标url，缺省则取当前窗口url")]),t._v(" "),a("li",[t._v("@return keyName参数的值，如果获取失败返回"),a("code",[t._v("null")])])]),t._v(" "),a("h2",{attrs:{id:"vue全局功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue全局功能"}},[t._v("#")]),t._v(" Vue全局功能")]),t._v(" "),a("p",[t._v("将高频使用的Vue功能全局注册可以显著提高开发效率，在多人协作的项目中，Vue全局功能必须有一个明确、集中的管理方式，否则很容易导致全局功能得不到充分利用，项目内各自造轮子的情况。")]),t._v(" "),a("h3",{attrs:{id:"注册器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册器"}},[t._v("#")]),t._v(" 注册器")]),t._v(" "),a("p",[t._v("全局功能注册器（"),a("code",[t._v("@/core/register.js")]),t._v("）是一个专门注册Vue全局功能的Vue插件，在项目入口文件（"),a("code",[t._v("@/main.js")]),t._v("）中调用。原则上项目中的所有Vue全局功能都应该在这里注册，包括：方法、组件、过滤器、指令等。")]),t._v(" "),a("p",[t._v("注册全局功能应遵循"),a("strong",[t._v("谨慎且必要")]),t._v("原则，通常我们会将通用UI组件、高频功能组件全局注册，避免客户端频繁加载同一个组件。")]),t._v(" "),a("h3",{attrs:{id:"开发须知"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发须知"}},[t._v("#")]),t._v(" 开发须知")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("由于通用增删改查组件（"),a("code",[t._v("@/main/components/BaseCURD.vue")]),t._v("）的实现机制，数据模型中指定的展示控件也必须注册为全局组件。")])]),t._v(" "),a("li",[a("p",[t._v("全局组件命名应遵守"),a("strong",[t._v("组件命名规范")]),t._v("，做到表意清晰、准确。")])]),t._v(" "),a("li",[a("p",[t._v("全局组件有三种组件注册方式：同步加载、合并打包异步加载、常规异步加载。同步加载可以确保界面能第一时间渲染组件，常用于UI组件；合并打包异步加载适用于渲染优先级不像UI组件那么高，但使用率较高的组件，将他们打成一个包可以避免界面由于频繁异步请求组件导致的卡顿感；其余使用率不是那么高的组件，就使用常规异步加载方式，按需加载，避免不必要的客户端请求。")])])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * @/core/register.js\n * \n * */")]),t._v(" \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局组件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BaseHeader "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/main/components/BaseHeader.vue'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" globalComponents "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    BaseHeader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("BaseBreadcrumb")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "global-components" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/main/components/BaseBreadcrumb.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("BaseSubNav")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "global-components" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/main/components/BaseSubNav.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("BasePagination")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "global-components" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/main/components/BasePagination.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("BaseCURD")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "global-components" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/main/components/BaseCURD.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("DictRadio")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "global-components" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/main/components/DictRadio.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("DictCheckbox")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "global-components" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/main/components/DictCheckbox.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("DictSelect")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "global-components" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/main/components/DictSelect.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("DictCascader")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "global-components" */')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/main/components/DictCascader.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("OrgPicker")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/system/components/OrgPicker.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("TheResourcePicker")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/system/components/TheResourcePicker.vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resolve"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("install")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("Vue")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注册组件")]),t._v("\n        Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("globalComponents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("key")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            Vue"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" globalComponents"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br")])]),a("h2",{attrs:{id:"网络请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络请求"}},[t._v("#")]),t._v(" 网络请求")]),t._v(" "),a("p",[a("code",[t._v("@/core/request.js")]),t._v("输出全局公用的axios实例，该实例封装了基础请求配置、 request 拦截器、response 拦截器、统一的错误处理、baseURL 设置等。")]),t._v(" "),a("h3",{attrs:{id:"请求配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求配置"}},[t._v("#")]),t._v(" 请求配置")]),t._v(" "),a("p",[t._v("默认配置"),a("code",[t._v("baseURL")]),t._v("、超时时间、"),a("code",[t._v("Content-Type")]),t._v("请求头。")]),t._v(" "),a("p",[t._v("其中"),a("code",[t._v("baseURL")]),t._v("的配置我们用匹配域名的方式，使一套前端代码可以匹配多套后端环境，构建发布时不需要额外修改前端请求配置。")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" axios "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'axios'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" util "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 环境配置")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENVIRONMENT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mock")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://rap2api.taobao.org/app/mock/223572'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dev")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://zjsz.kaifa/japi'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://test.com/api'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("master")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//master.com/api'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HASH")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"dev.com"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENVIRONMENT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"test.com"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENVIRONMENT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"master.com"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENVIRONMENT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("master\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" baseURL "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HASH")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ENVIRONMENT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br")])]),a("h3",{attrs:{id:"参数处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数处理"}},[t._v("#")]),t._v(" 参数处理")]),t._v(" "),a("p",[t._v("统一预处理请求参数，将get和delete请求中的空字符参数，统一替换为"),a("code",[t._v("null")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"异常处理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#异常处理"}},[t._v("#")]),t._v(" 异常处理")]),t._v(" "),a("p",[t._v("异常分为请求状态异常和业务状态异常，请求状态主要根据"),a("code",[t._v("HTTP Status Code")]),t._v("确定，状态码规则参考RESTFul；业务状态主要根据"),a("code",[t._v("response.data.code")]),t._v("确定，接口规则详见"),a("a",{attrs:{href:""}},[t._v("接口响应规则约定")]),t._v("。")]),t._v(" "),a("h3",{attrs:{id:"token续期机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#token续期机制"}},[t._v("#")]),t._v(" Token续期机制")]),t._v(" "),a("h3",{attrs:{id:"数据缓存机制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据缓存机制"}},[t._v("#")]),t._v(" 数据缓存机制")]),t._v(" "),a("h2",{attrs:{id:"模块间通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块间通信"}},[t._v("#")]),t._v(" 模块间通信")]),t._v(" "),a("h3",{attrs:{id:"store"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#store"}},[t._v("#")]),t._v(" Store")]),t._v(" "),a("p",[t._v("大多数项目其实不需要vuex，根目录下"),a("code",[t._v("store.js")]),t._v("维护了一个"),a("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/state-management.html#%E7%AE%80%E5%8D%95%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E8%B5%B7%E6%AD%A5%E4%BD%BF%E7%94%A8",target:"_blank",rel:"noopener noreferrer"}},[t._v("简单store模式"),a("OutboundLink")],1),t._v("，支持同步、异步数据存取，用于共享或缓存数据，"),a("code",[t._v("common/components/nav.vue")]),t._v("和"),a("code",[t._v("common/components/header.vue")]),t._v("里都有用例。")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// API示例：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" store "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/store"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同步存")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 同步取")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 异步取")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("action")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'someKey'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// res")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 刷新缓存数据")]),t._v("\nstore"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("action")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'someKey'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// res")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("p",[t._v("其中异步数据（action）具有并发请求队列机制，同一时间同一key的多次请求，实际只发起一次ajax，其余请求将进入队列，等候ajax返回后集中resolve。")]),t._v(" "),a("p",[t._v("异步数据获取逻辑需要在store.js内部定义，这里就不贴代码了。")]),t._v(" "),a("p",[t._v("其他没了。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),a("p",[t._v("注意那些 prop 会在一个组件实例创建"),a("strong",[t._v("之前")]),t._v("进行验证，所以实例的 property (如 "),a("code",[t._v("data")]),t._v("、"),a("code",[t._v("computed")]),t._v(" 等) 在 "),a("code",[t._v("default")]),t._v(" 或 "),a("code",[t._v("validator")]),t._v(" 函数中是不可用的。")])]),t._v(" "),a("h3",{attrs:{id:"event"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#event"}},[t._v("#")]),t._v(" Event")]),t._v(" "),a("p",[t._v("全局事件机制")]),t._v(" "),a("h2",{attrs:{id:"权限控制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#权限控制"}},[t._v("#")]),t._v(" 权限控制")])])}),[],!1,null,null,null);s.default=e.exports}}]);