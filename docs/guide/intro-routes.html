<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>路由结构 | CuttingMat</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.png">
    <script src="/assets/js/baidu.js"></script>
    <meta name="description" content="面向大中型项目的开发脚手架，助你的Vue项目一臂之力">
    <meta name="keywords" content="CuttingMat,Vue框架,Vue模板,前端模板,Vue项目模板">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.da9fb603.css" as="style"><link rel="preload" href="/assets/js/app.302217e0.js" as="script"><link rel="preload" href="/assets/js/2.bdcb5a66.js" as="script"><link rel="preload" href="/assets/js/25.dbda50c0.js" as="script"><link rel="prefetch" href="/assets/js/10.9f62f8f3.js"><link rel="prefetch" href="/assets/js/11.36fa8cae.js"><link rel="prefetch" href="/assets/js/12.e9b9c9c6.js"><link rel="prefetch" href="/assets/js/13.ea286723.js"><link rel="prefetch" href="/assets/js/14.f07f6717.js"><link rel="prefetch" href="/assets/js/15.6fa979bb.js"><link rel="prefetch" href="/assets/js/16.e4ceebe3.js"><link rel="prefetch" href="/assets/js/17.f43a5831.js"><link rel="prefetch" href="/assets/js/18.23bd9230.js"><link rel="prefetch" href="/assets/js/19.2f2cbaa7.js"><link rel="prefetch" href="/assets/js/20.17eef341.js"><link rel="prefetch" href="/assets/js/21.d5464082.js"><link rel="prefetch" href="/assets/js/22.841b31a6.js"><link rel="prefetch" href="/assets/js/23.b30927a8.js"><link rel="prefetch" href="/assets/js/24.4a676741.js"><link rel="prefetch" href="/assets/js/3.2e13d2a9.js"><link rel="prefetch" href="/assets/js/4.92581206.js"><link rel="prefetch" href="/assets/js/5.1751f49b.js"><link rel="prefetch" href="/assets/js/6.fe0bbd6a.js"><link rel="prefetch" href="/assets/js/7.062f41c8.js"><link rel="prefetch" href="/assets/js/8.af6461b8.js"><link rel="prefetch" href="/assets/js/9.fb0c70b3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.da9fb603.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="CuttingMat" class="logo"> <span class="site-name can-hide">CuttingMat</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/about.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/function/core/" class="nav-link">
  功能
</a></div><div class="nav-item"><a href="http://cutting-mat.refined-x.com/template-element-ui/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  演示
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="插件" class="dropdown-title"><span class="title">插件</span> <span class="arrow down"></span></button> <button type="button" aria-label="插件" class="mobile-dropdown-title"><span class="title">插件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://cutting-mat.refined-x.com/axios/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @cutting-mat/axios
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://cutting-mat.refined-x.com/vue-store/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @cutting-mat/vue-store
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://cutting-mat.refined-x.com/el-upload/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @cutting-mat/uploader
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://cutting-mat.refined-x.com/animater/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @cutting-mat/animater
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/cutting-mat" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/about.html" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/function/core/" class="nav-link">
  功能
</a></div><div class="nav-item"><a href="http://cutting-mat.refined-x.com/template-element-ui/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  演示
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="插件" class="dropdown-title"><span class="title">插件</span> <span class="arrow down"></span></button> <button type="button" aria-label="插件" class="mobile-dropdown-title"><span class="title">插件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://cutting-mat.refined-x.com/axios/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @cutting-mat/axios
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://cutting-mat.refined-x.com/vue-store/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @cutting-mat/vue-store
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://cutting-mat.refined-x.com/el-upload/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @cutting-mat/uploader
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://cutting-mat.refined-x.com/animater/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  @cutting-mat/animater
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/cutting-mat" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>介绍</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/about.html" class="sidebar-link">CuttingMat</a></li><li><a href="/guide/getting-started.html" class="sidebar-link">快速开始</a></li><li><a href="/guide/community.html" class="sidebar-link">社区</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>指南</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guide/intro-catalogue.html" class="sidebar-link">目录结构</a></li><li><a href="/guide/intro-routes.html" aria-current="page" class="active sidebar-link">路由结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guide/intro-routes.html#主路由与旁路路由" class="sidebar-link">主路由与旁路路由</a></li><li class="sidebar-sub-header"><a href="/guide/intro-routes.html#配置路由" class="sidebar-link">配置路由</a></li><li class="sidebar-sub-header"><a href="/guide/intro-routes.html#动态菜单" class="sidebar-link">动态菜单</a></li><li class="sidebar-sub-header"><a href="/guide/intro-routes.html#动态模板" class="sidebar-link">动态模板</a></li></ul></li><li><a href="/guide/intro-code.html" class="sidebar-link">代码组织</a></li><li><a href="/guide/icon.html" class="sidebar-link">字体图标</a></li><li><a href="/guide/guide-config.html" class="sidebar-link">配置参考</a></li><li><a href="/guide/appointment-dev.html" class="sidebar-link">前后端开发约定</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="路由结构"><a href="#路由结构" class="header-anchor">#</a> 路由结构</h1> <p>这里的路由结构是指从访问控制的角度，框架将路由分成<strong>主路由与旁路路由</strong>两大类。</p> <p>以模板默认路由为例，主模块里的首页与其他业务模块组成主路由，主模块除首页外的其他页面被划归为旁路路由，如下图所示：</p> <p><img src="/assets/img/%E8%B7%AF%E7%94%B1%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1.png" alt="路由结构设计"></p> <h2 id="主路由与旁路路由"><a href="#主路由与旁路路由" class="header-anchor">#</a> 主路由与旁路路由</h2> <p>主路由与旁路路由是从访问控制的角度延申出的概念，所谓旁路是指不受访问限制的区域，而主路自然就是被访问控制系统所覆盖的区域。</p> <p>框架内置两个访问控制模块：用户鉴权(<code>account-auth</code>)和权限控制（<code>access-control</code>），分别基于用户登录状态和用户角色实现访问权限控制。</p> <p>其中，用户鉴权模块只允许已登录用户访问主路由，未登录用户只能访问旁路路由；权限控制模块的路由权限只对主路由生效，旁路路由无需权限即可访问（除了路由权限，权限控制模块还将接管请求权限，并能实现任意界面元素根据权限的显示隐藏，详见<a href="">访问控制</a>）。</p> <h2 id="配置路由"><a href="#配置路由" class="header-anchor">#</a> 配置路由</h2> <p>主路由与旁路路由都是在路由配置文件（<code>@/route.config.js</code>）中定义的，所有的模块路由都将在此引入，并自由组合，只要最终对外输出<code>MainRoute</code>（主路由）和<code>BypassRoute</code>（旁路路由）两个路由数组即可。</p> <p>以模板默认路由配置为例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token comment">// 主模块</span>
<span class="token keyword">import</span> main <span class="token keyword">from</span> <span class="token string">'@/main/index'</span>

<span class="token comment">// 业务模块</span>
<span class="token keyword">import</span> system <span class="token keyword">from</span> <span class="token string">'@/system'</span>
<span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">'@/user'</span>


<span class="token comment">// 主路由</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> MainRoute <span class="token operator">=</span> <span class="token punctuation">[</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> main<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token operator">...</span>system<span class="token punctuation">,</span>
        <span class="token operator">...</span>user<span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 旁路路由</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> BypassRoute <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>main<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>主路由和旁路路由的数据结构没有任何限制，可以根据需要任意组织。除了像模板默认路由这样将业务模块挂载为首页子路由外，还可以让业务模块与首页路由平级成为顶级业务模块，或者直接将整个模块定义为旁路业务模块（如本节顶部路由结构示意图所示）。</p> <p>路由实例初始只会加载旁路路由，用户鉴权(<code>account-auth</code>)模块启动后，会根据是否开启权限控制（<code>access-control</code>）功能决定是否动态加载主路由，如果未开启权限控制就全量添加主路由，反之则会由权限控制模块根据用户权限，从主路由中筛选出可用路由后再动态添加到路由实例中。</p> <p>对于企业官网这类完全公开访问的站点，连用户鉴权(<code>account-auth</code>)模块也不会启用，那就需要将所有路由都定义为旁路路由，随路由实例初始化一起加载。</p> <h2 id="动态菜单"><a href="#动态菜单" class="header-anchor">#</a> 动态菜单</h2> <p>实际项目中经常把路由数据用来实现网站的导航菜单，在不开启权限控制（<code>access-control</code>）的情况下，路由配置中的<code>MainRoute</code>（主路由）和<code>BypassRoute</code>（旁路路由）也可以作为站点导航菜单的数据源，通过调整模块顺序和路由<code>meta</code>信息，基本可以实现任意导航效果。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 路由数据用于实现导航菜单</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MainRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/route.config&quot;</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>开启权限控制（<code>access-control</code>）的情况下，用户的可访问菜单应该随权限动态变化，因此不能直接拿静态的路由数据实现导航菜单，而要在权限功能配置（<code>@/plugin.permission.config.js</code>）中定义<code>AfterGetDynamicRoute()</code>方法，在获取动态路由后将动态路由存储，从而用于实现动态菜单或其他业务场景。</p> <p>例如模板默认<code>@/plugin.permission.config.js</code>文件中定义的<code>AfterGetDynamicRoute</code>方法为：将动态路由存入<code>$store.state.DynamicRoute</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 默认的@/plugin.permission.config.js</span>
<span class="token operator">...</span>
<span class="token comment">// 获取路由权限后回调</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">AfterGetDynamicRoute</span> <span class="token operator">=</span> <span class="token parameter">routes</span> <span class="token operator">=&gt;</span> Vue<span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;DynamicRoute&quot;</span><span class="token punctuation">,</span> routes<span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="动态模板"><a href="#动态模板" class="header-anchor">#</a> 动态模板</h2> <p>通常一个站点的所有页面都会采用相同的页面基础布局，比如相同的头部、底部样式，只要将所有页面都挂载为首页子路由，利用<a href="https://router.vuejs.org/zh/guide/essentials/nested-routes.html" target="_blank" rel="noopener noreferrer">嵌套路由<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>可以很容易实现整站框架模板复用，但如果个别业务模块希望脱离主模板实现独立的界面风格，可以通过以下两种方法实现。</p> <p>一、将模块定义为顶级路由（与首页平级）即可脱离嵌套路由限制。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 主路由</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> MainRoute <span class="token operator">=</span> <span class="token punctuation">[</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> main<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token operator">...</span>system<span class="token punctuation">,</span>
            <span class="token operator">...</span>user<span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>TopLevelModule   <span class="token comment">// 顶级业务模块</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>二、在首页（<code>/</code>）中定义多套模板，并根据当前访问路由切换模板。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> data<span class="token operator">-</span>v 模板 <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>LayoutBlank v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;$route.path.indexOf('/data-v') === 0&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 默认模板 <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>LayoutMain v<span class="token operator">-</span><span class="token keyword">else</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guide/intro-catalogue.html" class="prev">
        目录结构
      </a></span> <span class="next"><a href="/guide/intro-code.html">
        代码组织
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.302217e0.js" defer></script><script src="/assets/js/2.bdcb5a66.js" defer></script><script src="/assets/js/25.dbda50c0.js" defer></script>
  </body>
</html>
